%\documentclass{new_tlp}
\documentclass[sigconf, nonacm]{acmart}

\let\Bbbk\relax
% Essential packages
\usepackage{graphicx}
\usepackage{amsmath,amssymb,amsfonts}
\usepackage{xspace}
\usepackage{hyperref}
\usepackage{cleveref}
\usepackage{xcolor}
\usepackage{enumitem}

% Algorithm packages
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}

% Additional packages
\usepackage{multicol}
\usepackage{multirow}
\usepackage{mathtools}
\usepackage{relsize}
\usepackage{bm}
\usepackage{verbatimbox}
\usepackage{wrapfig}
\usepackage{fancyvrb}
%\RecustomVerbatimEnvironment{verbatim}{Verbatim}{fontsize=\footnotesize}

% Theorem-like environments (not provided by new_tlp class)
\usepackage{amsthm}
\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
\newtheorem{example}[definition]{Example}
\theoremstyle{plain}
\newtheorem{theorem}[definition]{Theorem}
\newtheorem{proposition}[definition]{Proposition}
\newtheorem{lemma}[definition]{Lemma}
\newtheorem{corollary}[definition]{Corollary}
\theoremstyle{remark}
\newtheorem{remark}[definition]{Remark}

% Unnumbered proposition environment for restating propositions in appendix
\newtheorem*{proposition*}{Proposition}

% Restatable theorems (must be after amsthm)
\usepackage{thmtools,thm-restate}

% Custom formatting commands
\newcommand{\mypara}[1]{\smallskip\noindent\textbf{#1.}}
%\newcommand{\temph}[1]{\textbf{#1}}
\newcommand{\temph}[1]{\emph{#1}}

\newcommand{\remove}[1]{}
\newcommand{\udi}[1]{\textcolor{blue}{[Udi says: #1]}}
\newcommand{\claude}[1]{\textcolor{red}{[Claude: #1]}}

% Abbreviation commands
\newcommand{\GLP}{\textsc{GLP}\xspace}
\newcommand{\lp}{logic programs\xspace}
\newcommand{\cp}{Concurrent Prolog\xspace}
\newcommand{\scl}{\textsc{scl}\xspace}
\newcommand{\gsn}{\textsc{gsn}\xspace}

% Math commands
\newcommand{\calV}{\mathcal{V}}
\newcommand{\calG}{\mathcal{G}}
\newcommand{\calT}{\mathcal{T}}
\newcommand{\calF}{\mathcal{F}}
\newcommand{\calR}{\mathbb{R}}
\newcommand{\calN}{\mathbb{N}}
\newcommand{\calA}{\mathcal{A}}
\newcommand{\V}{\mathcal{V}}
\newcommand{\calS}{\mathcal{S}}
\newcommand{\calL}{\mathcal{L}}
\newcommand{\calP}{\mathcal{P}}
\newcommand{\calM}{\mathcal{M}}
\newcommand{\calE}{\mathcal{E}}
\newcommand{\calB}{\mathcal{B}}
\newcommand{\calC}{\mathcal{C}}
\newcommand{\calX}{\mathcal{X}}
\newcommand{\calD}{\mathcal{D}}

% Roman numeral abbreviations
\newcommand{\ia}{\textit{i}}
\newcommand{\ib}{\textit{ii}}
\newcommand{\ic}{\textit{iii}}
\newcommand{\id}{\textit{iv}}
\newcommand{\iie}{\textit{v}}
\newcommand{\iif}{\textit{vi}}
\newcommand{\iiv}{\textit{iv}}
\newcommand{\iv}{\textit{v}}

% Program counter for examples
\newcounter{pc}
\newcommand\spc{\addtocounter{pc}{1}\thepc}
\newcommand{\Program}[1]{\medskip\noindent\textbf{Program \spc: #1}\vspace{-5pt}}

% Set list spacing
\setlist{nosep, leftmargin=*}
\setlist{itemsep=1pt, topsep=3pt, leftmargin=*}

\newtheorem{observation}{Observation}

\title{GLP: A Grassroots, Multiagent, Concurrent,\\ Logic Programming Language}

\author[Ehud Shapiro]{Ehud Shapiro\\
London School of Economics and Weizmann Institute of Science\\
(e-mail: ehud.shapiro@weizmann.ac.il)}



%\begin{keywords}
%concurrent logic programming, grassroots platforms, multiagent systems, transition systems, implementation hierarchy
%\end{keywords}

\begin{abstract}
A digital platform is \emph{grassroots}~\cite{shapiro2023grassrootsBA} if it can have multiple instances that can (1) operate independently of each other and of any global resource other than the network, and (2) coalesce into ever larger instances, possibly resulting in a single global instance.
Grassroots platforms that have been specified (but not yet implemented) include the grassroots social graph~\cite{shapiro2025atomic}, grassroots social networks~\cite{shapiro2023gsn}, grassroots cryptocurrencies~\cite{shapiro2024gc,lewis2023grassroots}, and grassroots federation~\cite{shapiro2025GF}. The Scuttlebutt protocol and social network~\cite{kermarrec2020gossiping} is perhaps the sole example of a deployed grassroots platform.

Here, we present Grassroots Logic Programs (GLP), a multiagent, concurrent, logic programming language, designed for the implementation of smartphone-based, serverless, grassroots platforms.  First we present Concurrent GLP as a variation on Logic Programs (LP)~\cite{lloyd1987foundations}.  Syntactically, GLP adds to LP (1) \textbf{Readers:} Each logic variable (now referred to as \emph{writer}) is paired with a \emph{reader}~\cite{levi1985readonly}, which is assigned a value only once its paired writer is assigned that value;  (2) \textbf{Single-Occurrence (SO):} A variable may occur at most once in a goal or a clause; and (3) \textbf{Single-Reader Single-Writer (SRSW):} A writer occurs in a clause iff its paired reader occurs in the clause.  
The operational semantics of GLP is a variation on that of LP, which preserves the concept of computation-as-deduction~\cite{kowalski1974predicate}, yet conjured both linear logic~\cite{girard1987linear} and futures/promises~\cite{friedman1976impact}: An assignment to a variable may be produced at most once, via the sole occurrence of a write (promise), and consumed at most once, via the sole occurrence of its paired reader (future). We illustrate Concurrent GLP via a simulation of a grassroots social graph, which agents that may initiate friendships (bidirectional communication channels) via ``cold-calls'' as well introduce mutual friends to each other, via a simulated network switch.

Then, we present multiagent transition systems and their specification via multiagent atomic transactions, and use them to define multiagent GLP (maGLP), where the key challenge is realizing ``cold-calls'':  How can two agents in disconnected components of the social graph become the owners of paired logic variables?  maGLP extends GLP with (1) \textbf{Multiagents:}  Named agents that operate independently while communicating to remote readers assignments made to paired local writers;  (2) \textbf{Cold-calls:} A means for sending a term with variables to a named agent while retaining their paired variables locally.  We then present an maGLP implementation of the social graph in which the network-simulator is replaced by maGLP's Network transaction, and social cold-calls among agents are realised by maGLP cold-calls among these agents.

Lastly, we recall the definition of grassroots platforms~\cite{shapiro2023grassrootsBA} and how to prove that a platform specified via atomic transactions is grassroots~\cite{shapiro2025atomic}, and apply these to prove that maGLP is indeed grassroots.  
\end{abstract}



\begin{document}
\maketitle
% Main sections
\input{sections/introduction}
\input{sections/concurrent-glp}
\input{sections/maglp}
\input{sections/grassroots}
\input{sections/related-work}
\input{sections/conclusion}

\bibliographystyle{acmtrans}
\bibliography{bib}

\appendix

\input{sections/appendix-proofs}
\input{sections/appendix-guards}
\input{sections/appendix-workstation}
\input{sections/appendix-smartphone}
\clearpage
\onecolumn
\input{sections/appendix-additional-techniques}
\input{sections/appendix-social-graph-complete}

\end{document}
